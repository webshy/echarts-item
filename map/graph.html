<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html,
        body {
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="chart" class="chart" style="width:100%;height:100%"></div>
    <!-- </div> -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="./echarts-full.min.js"></script>
    <script>
        var myChart = echarts.init(document.getElementById('chart'));
        var data1 = [
            {
                "id": 0,
                "name": "河北",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 50,
                "type": "zone",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    },

                },
                "label": {
                    "normal": {
                        "show": true
                    },
                },
                'datas': "{'ip':'12.192.192}"
            },
            {
                "id": 1,
                "name": "220.220.0.1/8",
                "category": 1,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 2,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 3,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 4,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            }, {
                "id": 5,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 6,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 7,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#040193"
                    }
                }
            },
            {
                "id": 8,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 9,
                "name": "220.220.0.8/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 10,
                "name": "220.220.0.10/8",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 11,
                "name": "网络设备",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 12,
                "name": "安全设备",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 13,
                "name": "物联网设备",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 14,
                "name": "主机设备",
                "category": 0,
                "symbol": "image://http://thumb12.jfcdns.com/2018-06/bce5b231ad7df722.png",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 15,
                "name": "存活资产",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 16,
                "name": "存活资产",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 17,
                "name": "存活资产",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 18,
                "name": "存活资产",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    }
                }
            },
            {
                "id": 19,
                "name": "ip段",
                "category": 0,
                "symbol": "circle",
                "symbolSize": 20,
                "type": "cluster",
                "itemStyle": {
                    "normal": {
                        "color": "#0a3a87"
                    },
                }
            },

        ]
        var link1 = [{
            "source": 0,
            "target": 1
        },
        {
            "source": 0,
            "target": 2
        },
        {
            "source": 0,
            "target": 3
        },
        {
            "source": 0,
            "target": 4
        },
        {
            "source": 0,
            "target": 5
        },
        {
            "source": 0,
            "target": 6
        },
        {
            "source": 0,
            "target": 7
        },
        {
            "source": 0,
            "target": 8
        },
        {
            "source": 0,
            "target": 9
        },
        {
            "source": 0,
            "target": 10
        },
        {
            "source": 1,
            "target": 11
        },
        {
            "source": 1,
            "target": 12
        },
        {
            "source": 1,
            "target": 13
        },
        {
            "source": 1,
            "target": 14
        },
        {
            "source": 14,
            "target": 15
        },
        {
            "source": 14,
            "target": 16
        },
        {
            "source": 14,
            "target": 17
        },
        {
            "source": 14,
            "target": 18
        },
        {
            "source": 18,
            "target": 19
        },

        ]
        option = {
            backgroundColor: '#000',
            tooltip: {//弹窗
                trigger: 'item',
                formatter: function (params) {
                    // console.log(params,'---')
                    return params.data.datas

                }
            },
            color: ['#09022C',
                '#040193',
                '#073CFE',
                '#0065C2'],
            legend: { //=========小图标，圖表控件
                show: true,
                data: [
                    //     {
                    //     name: '区域',
                    //     icon: 'circle' //'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'
                    //     //icon:'image://./images/icon1.png'  //如果用图片img，格式为'image://+icon文件地址'，其中image::后的//不能省略
                    // },
                    // {
                    //     name: '集群',
                    //     icon: 'circle'
                    // }, {
                    //     name: '宿主机',

                    //     icon: 'circle'
                    // }, {
                    //     name: '云主机',
                    //     icon: 'circle'
                    // }
                ]
            },
            series: [{//图片配置
                type: 'graph', //关系图
                //name : "拓扑图", //系列名称，用于tooltip的显示，legend 的图例筛选，在 setOption 更新数据和配置项时用于指定对应的系列。
                layout: 'force', //图的布局，类型为力导图，'circular' 采用环形布局，见示例 Les Miserables
                legendHoverLink: true,//是否启用图例 hover(悬停) 时的联动高亮。
                hoverAnimation: true,//是否开启鼠标悬停节点的显示动画
                coordinateSystem: null,//坐标系可选
                xAxisIndex: 0, //x轴坐标 有多种坐标系轴坐标选项
                yAxisIndex: 0, //y轴坐标
                force: {
                    gravity: 0.1,
                    repulsion: 400,
                    edgeLength: [150, 200],
                    // edgeLength: [10, 50],
                    layoutAnimation: true,
                    friction: 0.6,
                },
                cursor: "pointer",
                roam: true,//是否开启鼠标缩放和平移漫游。默认不开启。如果只想要开启缩放或者平移，可以设置成 'scale' 或者 'move'。设置成 true 为都开启
                nodeScaleRatio: 0.6,//鼠标漫游缩放时节点的相应缩放比例，当设为0时节点不随着鼠标的缩放而缩放
                draggable: true,//节点是否可拖拽，只在使用力引导布局的时候有用。
                focusNodeAdjacency: true,//是否在鼠标移到节点上的时候突出显示节点以及节点的边和邻接节点。
                symbolSize: 50,//图形大小
                edgeSymbolSize: 10,//边两端的标记大小，可以是一个数组分别指定两端，也可以是单个统一指定。
                autoCurveness: 10,
                itemStyle: {//===============图形样式，有 normal 和 emphasis 两个状态。normal 是图形在默认状态下的样式；emphasis 是图形在高亮状态下的样式，比如在鼠标悬浮或者图例联动高亮时。
                    normal: { //默认样式
                        label: {
                            show: true
                        },
                        // borderType : 'solid', //图形描边类型，默认为实线，支持 'solid'（实线）, 'dashed'(虚线), 'dotted'（点线）。
                        // borderColor : 'rgba(255,215,0,0.4)', //设置图形边框为淡金色,透明度为0.4
                        // borderWidth : 2, //图形的描边线宽。为 0 时无描边。
                        // opacity : 1 // 图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。默认0.5
                    },
                    emphasis: {//高亮状态
                        color: '#35afd8',
                    }
                },
                lineStyle: { //==========关系边的公用线条样式。
                    normal: {
                        // color: '#31354B',
                        color: '#0a3a87',
                        width: '1',
                        type: 'solid', //线的类型 'solid'（实线）'dashed'（虚线）'dotted'（点线）
                        curveness: 0, //线条的曲线程度，从0到1
                        opacity: 0.7,
                        // 图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。默认0.5
                    },
                    emphasis: {//高亮状态
                        color: '#35afd8',
                    }
                },
                label: { //=============图形上的文本标签
                    normal: {
                        show: false,//是否显示标签。
                        position: 'bottom',//标签的位置。['50%', '50%'] [x,y]   'inside'
                        textStyle: { //标签的字体样式
                            // color: '#2D2F3B', //字体颜色
                            color: '#0a3a87', //字体颜色
                            fontStyle: 'normal',//文字字体的风格 'normal'标准 'italic'斜体 'oblique' 倾斜
                            fontWeight: 'bolder',//'normal'标准'bold'粗的'bolder'更粗的'lighter'更细的或100 | 200 | 300 | 400...
                            fontFamily: 'sans-serif', //文字的字体系列
                            fontSize: 12, //字体大小
                        },
                    },
                    emphasis: {//高亮状态
                        textStyle: { //标签的字体样式
                            // color: '#2D2F3B', //字体颜色
                            color: '#35afd8', //字体颜色
                        }
                    }
                },
                edgeLabel: {//==============线条的边缘标签
                    normal: {
                        show: false
                    },
                    emphasis: {//高亮状态

                    }
                },
                //别名为nodes   name:影响图形标签显示,value:影响选中后值得显示,category:所在类目的index,symbol:类目节点标记图形,symbolSize:10图形大小
                //label:标签样式。
                //数据
                data: data1,
                links: link1,
                categories: [ //symbol name：用于和 legend 对应以及格式化 tooltip 的内容。 label有效
                    {
                        name: '区域',
                        symbol: 'diamond',
                        label: { //标签样式
                        }
                    }, {
                        name: '集群',
                        symbol: 'rect'
                    }, {
                        name: '宿主机',
                        symbol: 'roundRect'
                    }, {
                        name: '云主机',
                        symbol: 'circle'
                    },

                ]
            }]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        // 解决 拖拽后 自动回到之前位置 
        myChart.on('mouseup', function (params) {
            var option = myChart.getOption();
            option.series[0].data[params.dataIndex].x = params.event.offsetX;
            option.series[0].data[params.dataIndex].y = params.event.offsetY;
            option.series[0].data[params.dataIndex].fixed = true;
            myChart.setOption(option);
        });
        window.addEventListener("resize", function () {
            setTimeout(() => {
                myChart.resize();
            }, 1000)
        });
    </script>
</body>

</html>