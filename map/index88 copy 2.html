<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body,
    html {
      height: 100%;
      margin: 0;
      background-color: #000;
    }

    /* .content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    } */
    .chart {
      height: 100%;
      /* height: 60%; */
      /* width: 50%; */
      /* position: absolute; */
      /* top: 50%; */
      /* left: 50%; */
      /* transform: translate(-50%, -50%); */

    }
  </style>
</head>

<body>
  <!-- <div class="content">  -->
  <div id="chart" class="chart"></div>
  <!-- </div> -->
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
  <script src="./echarts-full.min.js"></script>
  <script>
    // var uploadedDataURL = "./data-1498630743837-BygD9pgVW.json";
    var uploadedDataURL = "./data-1527045631990-r1dZ0IM1X.json";
    var myChart = echarts.init(document.getElementById('chart'));

    myChart.showLoading();

    $.get(uploadedDataURL, function (mapJson) {
      myChart.hideLoading();

      echarts.registerMap('SoutheastAsia', mapJson);

      let geoCoordMap = {
        " 湖北": ['72.31', '19.52'],
        " 北京": ['110.46', '64.92'],
        ' 上海': [140.48, 23.22],
        ' 江苏': [141.78, 26.6],
        ' 山东': [144, 35.65],
        ' 天津': [142.2, 45.13],
        ' 辽宁': [138.8, 50.8],
        ' 吉林': [118.63, 63.75],
        ' 黑龙江': [128.63, 59.75],
        ' 浙江': [137.19, 19.26],
        ' 福建': [123.3, 10.08],
        ' 广东': [91.23, 7.5],
        ' 海南': [102.35, 6.2],
        ' 西藏': [66.11, 29.97],
        ' 内蒙古': [100.65, 64.5],
        ' 广西': [84.31, 10.80],
        ' 云南': [76.73, 15.04],
        ' 新疆': [67.68, 46.77],
        ' 重庆': [67.54, 25.59],
        ' 四川': [65.06, 35.67],
        ' 青海': [66, 40.56],
        ' 甘肃': ['71.73', '52.03'],
        ' 宁夏': ['76.27', '56.47'],
        ' 陕西': ['85.95', '61.27'],
        ' 山西': ['91.53', '62.87'],
        ' 河北': ['143.48', '40.03'],
        ' 河南': ['143.65', '30.76'],
        ' 安徽': ['133.27', '15.86'],
        ' 湖南': ['110', '7.21'],
        ' 江西': ['115.89', '7.68'],
        ' 台湾': ['128.89', '12.68'],

        '北京': ['116.46', '39.92'],
        '上海': ['121.48', '31.22'],
        '天津': ['117.2', '39.13'],
        '重庆': ['107.54', '29.59'],
        '河北': ['114.48', '38.03'],
        '山西': ['112.53', '37.87'],
        '辽宁': ['123.38', '41.8'],
        '吉林': ['125.35', '43.88'],
        '黑龙江': ['126.63', '45.75'],
        '浙江': ['120.19', '30.26'],
        '福建': ['119.3', '26.08'],
        '山东': ['119.54', '36.65'],
        '河南': ['113.65', '34.76'],
        '湖北': ['114.31', '30.52'],
        '湖南': ['113', '28.21'],
        '广东': ['113.23', '23.16'],
        '海南': ['110.35', '20.02'],
        '四川': ['104.06', '30.67'],
        '贵州': ['106.71', '26.57'],
        '云南': ['102.73', '25.04'],
        '江西': ['115.89', '28.68'],
        '陕西': ['108.95', '34.27'],
        '青海': ['99', '36.56'],
        '甘肃': ['103.73', '36.03'],
        '广西': ['108.31', '22.80'],
        '新疆': ['87.68', '43.77'],
        '内蒙古': ['111.65', '40.82'],
        '西藏': ['91.11', '29.97'],
        '宁夏': ['106.27', '38.47'],
        '台湾': ['121.5', '25.14'],
        '香港': ['114.1', '22.2'],
        '澳门': ['113.33', '22.13'],
        '安徽': ['117.27', '31.86'],
        '江苏': ['119.78', '32.04']
      };
      let data = [
        {
          name: '湖北',
          value: '123'
        },
        {
          name: '北京',
        },
        {
          name: '上海',
        },
        {
          name: '江苏',
        },
        {
          name: '山东',
        },
        {
          name: '天津',
        },
        {
          name: '辽宁',
        },
        {
          name: '吉林',
        },
        {
          name: '黑龙江',
        },
        {
          name: '浙江',
        },
        {
          name: '福建',
        },
        {
          name: '广东',
        },
        {
          name: '海南'
        },
        {
          name: '内蒙古'
        },
        {
          name: '广西'
        },
        {
          name: '云南'
        },
        {
          name: '西藏'
        },
        {
          name: '新疆'
        },
        {
          name: '重庆'
        },
        {
          name: '四川'
        },
        {
          name: '青海'
        },
        {
          name: '甘肃'
        },
        {
          name: '宁夏'
        },
        {
          name: '陕西'
        },
        {
          name: '山西'
        },
        {
          name: '河北'
        },
        {
          name: '河南'
        },
        {
          name: '安徽'
        },
        {
          name: '湖南'
        },
        {
          name: '江西'
        },
        {
          name: '台湾'
        },
      ];

      let pathname = [
        ' 湖北',
        ' 北京',
        ' 上海',
        ' 江苏',
        ' 山东',
        ' 天津',
        ' 辽宁',
        ' 吉林',
        ' 黑龙江',
        ' 浙江',
        ' 福建',
        ' 广东',
        ' 海南',
        ' 内蒙古',
        ' 广西',
        ' 云南',
        ' 西藏',
        ' 新疆',
        ' 重庆',
        ' 四川',
        ' 青海',
        ' 甘肃',
        ' 宁夏',
        ' 陕西',
        ' 山西',
        ' 河北',
        ' 河南',
        ' 安徽',
        ' 湖南',
        ' 江西',
        ' 台湾'
      ];
      // const pathname = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'];


      function formtVData(geoData, data, srcNam) {
        var tGeoDt = [];
        for (var i = 0, len = data.length; i < len; i++) {
          var tNam = data[i].name
          if (srcNam[i] != tNam) {
            tGeoDt.push({
              name: tNam,
              value: geoData[tNam]
            });
          }

          tGeoDt.push({
            name: srcNam[i],
            value: geoData[srcNam[i]],
            symbolSize: 18,
            itemStyle: {
              normal: {
                color: '#fff',
                borderColor: '#000'
              }
            }
          });

        }
        return tGeoDt;
      }

      function formtGCData(geoData, data, srcNam, dest) {
        var tGeoDt = [];
        if (dest) {
          for (let i = 0, len = data.length; i < len; i++) {
            if (srcNam[i] != data[i].name) {
              tGeoDt.push({
                coords: [geoData[srcNam[i]], geoData[data[i].name]]
              });
            }
          }
        } else {
          for (let i = 0, len = data.length; i < len; i++) {
            if (srcNam[i] != data[i].name) {
              tGeoDt.push({
                coords: [geoData[data[i].name], geoData[srcNam[i]]]
              });
            }
          }
        }
        return tGeoDt;
      }

      let option = {
        backgroundColor: '#000',
        title: {
          show: false,
          text: '全国国GDP总量',
          subtext: 'GDP单位:百万美元',
          left: 'center',
          top: 'top',
          textStyle: {
            fontSize: 25,
            color: 'rgba(255,255,255, 0.9)'
          }
        },
        tooltip: {
          trigger: 'item',
          showDelay: 0,
          transitionDuration: 0.2,
          formatter: function (params) {
            var value = (params.value + '').split('.');
            value = value[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,');
            // return params.seriesName + '<br/>' + params.name + ': ' + value;
          }
        },
        visualMap: {
          show: false,
          left: 'right',
          min: 500000,
          max: 38000000,
          inRange: {
            //   color: ['#CCC', '#FEFEFE', '#EFEFEF', '#EEEEEE', '#EDEDED']
            // },
            color: ['#0a3a87', '#EFEFEF']
          },
          // text: ['High', 'Low'], // 文本，默认为数值文本
          textStyle: {
            fontSize: 16,
            color: '#EFEFEF'
          },
          calculable: true,

        },
        geo: {
          map: 'SoutheastAsia',
          zoom: 0.6,
          // center: [104.114129, 37.550339],
          label: {
            // 显示各省份市 文字
            normal: {
              show: false,
              textStyle: {
                color: '#fff'
              }
            },
            // 选中时候 显示各省份市 文字
            emphasis: {
              show: true,
              textStyle: {
                color: '#fff'
              }
            }
          },
          // roam: true,
          silent: false,
          aspectScale: 0.75,
          itemStyle: {
            normal: {
              shadowColor: '#002B45',
              shadowBlur: 4,
              shadowOffsetX: -6,
              areaColor: '#005FB2',
              borderColor: '#000'
            },
            emphasis: {
              areaColor: '#2a333d'
            }
          },
        },
        series: [
          {
            type: 'lines',
            zlevel: 2,
            // 线 效果
            effect: {
              show: false,
              period: 6,
              trailLength: 0.1,
              color: 'maroon',
              symbol: 'arrow',
              symbolSize: 8
            },
            lineStyle: {
              type: 'solid',
              normal: {
                // color: '#efefef',
                color: '#0a3a87',
                // color:'#0b2140',
                width: 1,
                opacity: 1,
                // curveness: 0.2 //线的弧度
              }
            },
            data: formtGCData(geoCoordMap, data, pathname, false)
          }, {
            // 控制坐标点 设置
            // type: 'effectScatter',
            type: 'scatter',
            coordinateSystem: 'geo',
            zlevel: 2,
            rippleEffect: {
              // period: 4,
              // scale: 2.5,
              brushType: 'stroke'
            },
            label: {
              normal: {
                // show: true,
                show: false,
                position: 'right',
                formatter: '{b}',
                textStyle: {
                  color: '#fff'
                }
              },
              emphasis: {
                show: true,
                emphasis: {
                  show: true,
                  textStyle: {
                    color: '#fff',
                  }
                }
              }
            },
            // 控制 坐标 闪烁的点 大小
            symbolSize: 0,
            // symbolSize: 5,
            itemStyle: {
              normal: {
                // shadowColor: 'rgba(0, 0, 0, 0.5)',
                shadowBlur: 20,
                color: '#EFEFEF',
                fontWeight: 400,
                borderColor: '#FFF'
              }
            },
            data: formtVData(geoCoordMap, data, pathname)
          }]
      };


      myChart.setOption(option);
    });
    window.addEventListener("resize", function () {
      myChart.resize();
    });
    //功能：画实心圆
    //参数：圆心坐标，半径，精确度，背景颜色
    function SolidCircle(cx, cy, r, p, color) {
      var s = 1 / (r / p);
      for (var i = 0; i < Math.PI * 2; i += s) {
        var div = document.createElement("div");
        div.style.position = "absolute";
        div.style.left = Math.sin(i) * r + cx + "px";
        div.style.top = Math.cos(i) * r + cy + "px";
        div.style.width = p + "px";
        div.style.height = p + "px";
        div.style.backgroundColor = color;
        document.body.appendChild(div);
      }
    }
    winWidth = document.body.clientWidth || document.documentElement.clientWidth
    winHeight = document.body.clientHeight || document.documentElement.clientHeight
    var centers = { centerW: winWidth / 2, centerH: winHeight / 2 };
    console.log(centers)

    // SolidCircle(centers.centerW, centers.centerH, 300, 2, "#0a3a87");
  </script>
</body>

</html>