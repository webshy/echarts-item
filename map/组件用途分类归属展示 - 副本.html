<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    html,
    body {
      margin: 0;
      height: 100%;
      width: 100%;
    }
  </style>
</head>

<body>
  <div id="chart" class="chart" style="width:100%;height:100%"></div>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
  <script src="./echarts-full.min.js"></script>
  <script>
    const targetCoord = [0, 40]
    const targetCoord1 = [10, 40]
    const curveness = 0.2
    const linesData = []
    const categories = [{
      name: '可用',
      itemStyle: {
        normal: {
          color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
            offset: 0,
            color: '#01acca'
          }, {
            offset: 1,
            color: '#5adbe7'
          }]),
        }
      },
      label: {
        show: false,
        normal: {
          fontSize: '14'
        }
      },
    }, {
      name: '不可用',
      itemStyle: {
        normal: {
          color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
            offset: 0,
            color: '#ffb402'
          }, {
            offset: 1,
            color: '#ffdc84'
          }]),
        }
      },
      label: {
        show: false,
        normal: {
          fontSize: '14'
        }
      },
    }]



    const list = [
      {
        name: "web邮件",
        value: targetCoord,
        symbolSize: 10,
        itemStyle: {
          normal: {
            color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
              offset: 0,
              color: '#157eff'
            }, {
              offset: 1,
              color: '#35c2ff'
            }]),
          }
        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "维基百科",
        value: targetCoord1,
        symbolSize: 10,
        itemStyle: {
          normal: {
            color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
              offset: 0,
              color: '#157eff'
            }, {
              offset: 1,
              color: '#35c2ff'
            }]),
          }
        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "javaScript图形插件",
        value: [20, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "数据库管理",
        value: [30, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "评论系统",
        value: [40, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "文件工具",
        value: [50, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "CDN",
        value: [60, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "文件管理系统",
        value: [70, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "问题跟踪",
        value: [80, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "内容管理系统",
        value: [90, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "学习管理系统",
        value: [100, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "字体脚本",
        value: [110, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "开发工具",
        value: [120, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "远程访问",
        value: [130, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "媒体服务器",
        value: [140, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "网络设备",
        value: [150, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "Web服务器扩展",
        value: [160, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "数据库",
        value: [170, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      },
      {
        name: "自动化影响",
        value: [180, 40],
        symbolSize: 10,
        itemStyle: {

        },
        label: {
          normal: {
            fontSize: '14'
          }
        },
      }
    ]

    console.log(list, '--')


    const items = [{
      name: "硬件层",
      category: 0,
      active: true,
      value: [0, 300],
      label: {
        normal: {
          show: true,
          position: 'top',
          color: '#5e5e5e',
          rotate: 0,
          // formatter: function (value) {
          //   return value.data.name
          // }
        },
        // rotate: -90,
      },
    }, {
      name: "系统层",
      category: 0,
      active: true,
      value: [50, 300],
      label: {
        normal: {
          show: true,
          position: 'top',
          rotate: 0,
          // formatter: function (value) {
          //   return value.data.name
          // }
        },
      }
    }, {
      name: "应用层",
      category: 0,
      active: true,
      value: [100, 300],
      label: {
        normal: {
          show: true,
          position: 'top',
          rotate: 0,
          // formatter: function (value) {
          //   return value.data.name
          // }
        },
      }
    }, {
      name: "支撑层",
      category: 1,
      value: [150, 300],
      label: {
        normal: {
          show: true,
          position: 'top',
          rotate: 0,
          // formatter: function (value) {
          //   return value.data.name
          // }
        },
      }
    }, {
      name: "服务器",
      category: 1,
      value: [200, 300],
      label: {
        normal: {
          show: true,
          position: 'top',
          rotate: 0,
          // formatter: function (value) {
          //   return value.data.name
          // }
        },
      }
    }]

    const data = items.concat(list)

    items.forEach(function (el) {
      if (el.active) {
        linesData.push([{
          coord: el.value
        }, {
          coord: targetCoord
        }])
      }
    })


    var links = [
      {
        "source": "硬件层",
        "target": "web邮件",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "系统层",
        "target": "web邮件",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "应用层",
        "target": "web邮件",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "支撑层",
        "target": "web邮件",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "服务器",
        "target": "web邮件",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "硬件层",
        "target": "维基百科",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "系统层",
        "target": "维基百科",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "应用层",
        "target": "维基百科",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "支撑层",
        "target": "维基百科",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      },
      {
        "source": "服务器",
        "target": "维基百科",
        "lineStyle": {
          "normal": {
            "color": "#ff0000",
            "curveness": 0.2
          }
        }
      }
    ]

    console.log(links), '---'



    option = {
      legend: [{
        formatter: function (name) {
          return echarts.format.truncateText(name, 100, '14px Microsoft Yahei', '…');
        },
        tooltip: {
          show: true
        },
        textStyle: {
          color: '#999'
        },
        selectedMode: false,
        right: 0,
        data: categories.map(function (el) {
          return el.name
        })
      }],
      xAxis: {
        show: false,
        type: 'value'
      },
      yAxis: {
        show: false,
        type: 'value'
      },
      series: [{
        type: 'graph',
        layout: 'none',
        coordinateSystem: 'cartesian2d',
        symbolSize: 60,
        z: 3,
        // edgeLabel: {
        //   normal: {
        //     show: true,
        //     textStyle: {
        //       fontSize: 14
        //     },
        //     formatter: function (params) {
        //       let txt = ''
        //       if (params.data.speed !== undefined) {
        //         txt = params.data.speed
        //       }
        //       return txt
        //     },
        //   }
        // },
        // legendHoverLink : true,
        focusNodeAdjacency: true,
        label: {
          normal: {
            show: true,
            color: '#5e5e5e',
            position: [10, 20],
            rotate: -90,
            // formatter: function (value) {
            //   return value.data.name.split('').join('\n')
            // }
          },
          // rotate: -90,
        },
        itemStyle: {
          normal: {
            shadowColor: 'none'
          },
          emphasis: {

          }
        },
        lineStyle: {
          normal: {
            width: 2,
            shadowColor: 'none'
          },
        },
        // edgeSymbol: ['none', 'arrow'],
        edgeSymbolSize: 8,
        data: data,
        links: links,
        categories: categories
      },
        //  {
        //   name: 'A',
        //   type: 'lines',
        //   coordinateSystem: 'cartesian2d',
        //   z: 1,
        //   // effect: {
        //   //   show: true,
        //   //   smooth: false,
        //   //   trailLength: 0,
        //   //   // symbol: "arrow",
        //   //   color: 'rgba(55,155,255,0.5)',
        //   //   symbolSize: 12
        //   // },
        //   lineStyle: {
        //     normal: {
        //       curveness: curveness
        //     }
        //   },
        //   data: linesData
        // }
      ]
    }
    var myChart = echarts.init(document.getElementById('chart'));
    myChart.setOption(option)
    window.addEventListener("resize", function () {
      setTimeout(() => {
        myChart.resize();
      }, 1000)
    });
  </script>

</body>

</html>